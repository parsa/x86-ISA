<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.1//EN" "http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd">
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" type="text/css" href="../assets/style.css" />
<title>MFENCE: Memory Fence (x86 Instruction Set Reference)</title>
<link rel="icon" type="image/ico" href="favicon.ico" />
<meta name="keywords"
content="assembly,asm,programming,optimization,optimisation,c,c++,x86,pastebin,opcode,opcodes,dictionary,intel,amd,download,downloads,tutorial" />
<meta name="description"
content="x86 assembly tutorials, x86 opcode reference, programming, pastebin with syntax highlighting" />
<meta name="robots" content="index, follow" />
<script async src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
<script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</head>
<body>
<div class="container"><h1 class="x86-instruction-set-reference">x86 Instruction Set Reference</h1>
<h2>MFENCE - Memory Fence</h2>
<object>
<table>
<tr>
<th>Opcode</th>
<th>Mnemonic</th>
<th>Description</th>
</tr>
<tr>
<td><code>0F AE /6</code></td>
<td><code>MFENCE</code></td>
<td>Serializes load and store operations.</td>
</tr>
</table>
</object>
<object>
<table>
<tr>
<th>Description</th>
</tr>
<tr>
<td>
<p>Performs a serializing operation on all load-from-memory and store-to-memory instructions that were issued prior the MFENCE instruction. This serializing operation guarantees that every load and store instruction that precedes in program order the MFENCE instruction is globally visible before any load or store instruction that follows the MFENCE instruction is globally visible. The MFENCE instruction is ordered with respect to all load and store instructions, other MFENCE instructions, any SFENCE and LFENCE instructions, and any serializing instructions (such as the CPUID instruction).</p>
<p>Weakly ordered memory types can be used to achieve higher processor performance through such techniques as out-of-order issue, speculative reads, write-combining, and write-collapsing.</p>
<p>The degree to which a consumer of data recognizes or knows that the data is weakly ordered varies among applications and may be unknown to the producer of this data. The MFENCE instruction provides a performance-efficient way of ensuring load and store ordering between routines that produce weakly-ordered results and routines that consume that data.</p>
<p>It should be noted that processors are free to speculatively fetch and cache data from system memory regions that are assigned a memory-type that permits speculative reads (that is, the WB, WC, and WT memory types). The PREFETCHh instruction is considered a hint to this speculative behavior. Because this speculative fetching can occur at any time and is not tied to instruction execution, the MFENCE instruction is not ordered with respect to PREFETCHh instructions or any other speculative fetching mechanism (that is, data could be speculatively loaded into the cache just before, during, or after the execution of an MFENCE instruction).</p>
</td>
</tr>
</table>
</object>
<object>
<table>
<tr>
<th>Operation</th>
</tr>
<tr>
<td>
<pre class="prettyprint">WaitOnLoadsAndStores(PrecedingLoadsAndStoreGloballyVisible); //wait on following loads and stores until the preceding loads and stores are globally visible
</pre>
</td>
</tr>
</table>
</object>
<object>
<table>
<tr>
<th>Exceptions</th>
</tr>
<tr>
<td>
None.
</td>
</tr>
</table>
</object>
</div>
</body>
</html>
